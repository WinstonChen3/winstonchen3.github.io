<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>Login</title>
    <link rel="icon" href="../images/3.png" type="image/png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/sign-in/">
    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
      .btn-dark {
    position: relative;
    transition: all 0.3s; /* Transition effect for all properties */
  }
  
  .btn-dark::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background-color: #fff; /* Underline color */
    transition: width 0.3s; /* Transition effect for the underline width */
  }
  
  .btn-dark:hover::after {
    width: 100%; /* Change the underline width on hover */
  }
    </style>

    
    <!-- Custom styles for this template -->
    <link href="../css/login.css" rel="stylesheet">
  </head>
  <body>
    <main class="form-signin bg-dark" style="top: 50%;">
      <form id="login-form" class="form" method="POST" name="login" action="/success" data-netlify="true">
          <a class="navbar-brand d-flex justify-content-center align-items-center" href="../index.html">
              <img src="/images/3.png" alt="image/png">
          </a>
          <h1 class="h3 mb-3 fw-normal text-white text-center">Please Sign In</h1>
        </div>
        <h3 class="text-white mb-0" style="text-align: center; margin-bottom: 0%;">Login</h3>
        <div class="container">
          <form id="login-form" class="form" method="POST" name="login" action="/success" data-netlify="true">
                       <div class="row mb-3">
                    <div class="col">
          <div class="form-group">
              <label for="floatingPassword" class="text-white">Password</label>
              <input type="password" class="form-control" id="floatingPassword" name="password" placeholder="Password" required>
          </div>
  
          <div class="text-white checkbox mb-3">
              <label>
                  <input type="checkbox" name="rememberMe" value="true"> Remember me
              </label>
          </div>
          
          <button class="w-100 btn btn-lg btn-dark" type="submit">Sign in</button>
          <p class="mt-5 mb-3 text-muted">&copy; 2017â€“2021</p>
      </form>
  </main>
  
  
  <script src="node_modules/gotrue-js/dist/index.umd.js"></script>
  <script>
// Create an instance of GoTrue
const auth = new GoTrue({
    APIUrl: 'https://winstonchen3.netlify.app/.netlify/identity',
    audience: '',
    setCookie: false,
});
// Add event listener to the login form
document.addEventListener('DOMContentLoaded', function () {
    const loginForm = document.getElementById('login-form');
    loginForm.addEventListener('submit', async (event) => {
        event.preventDefault();
        const formData = new FormData(loginForm);
        const email = formData.get('email');
        const password = formData.get('password');
        try {
            const { user } = await auth.login(email, password);
            console.log('User logged in:', user);
            // After successful login, you can redirect the user to a new page.
          window.location.href = 'equipment.html';
        } catch (error) {
            console.error('Error logging in:', error.message);
            // Handle login errors here, like displaying error messages to the user.
        }
    });
});
  </script>
  <script>
    const handleSubmit = (event) => {
  event.preventDefault();

  const myForm = event.target;
  const formData = new FormData(myForm);

  fetch("/", {
    method: "POST",
    headers: { "Content-Type": "application/x-www-form-urlencoded" },
    body: new URLSearchParams(formData).toString(),
  })
    .then(() => {
      alert("Thank you for your submission");
      window.location.href = "equipment.html"; // Redirect to equipment.html
    })
    .catch((error) => alert(error));
};

document
  .querySelector("form")
  .addEventListener("submit", handleSubmit);

  </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  </body>
</html>